---
description: 
globs: src/**/*.ts,src/**/*.tsx,src/**/*.d.ts,src/**/*.astro
alwaysApply: false
---
# Coding Standards & Refactoring

## ✨ Code Quality & Style

1.  **TypeScript Guidelines:** Use strict typing (avoid `any`). Follow settings in the root [tsconfig.json](mdc:tsconfig.json) and any specific settings in app/module `tsconfig.json` files. Document complex logic or public APIs with JSDoc.
2.  **Readability & Maintainability:** Write clean, well-organized code, following established patterns within the specific `app/` or `package/`.
3.  **Small Files & Components:**
    - Keep files concise (target < 300 lines). Refactor proactively.
    - Break down large components (e.g., `.tsx` files in `apps/website/src/components/`) into smaller, single-responsibility components.
4.  **Avoid Duplication (DRY):** Actively look for and reuse existing functionality, especially from shared `packages/`. Refactor to eliminate duplication across the monorepo.
5.  **Linting/Formatting:** Ensure all code conforms to project's ESLint/Prettier rules defined in [package.json](mdc:package.json) scripts and configuration files like [.prettierrc](mdc:.prettierrc). Run `bun format` and `bun lint` from the root directory.
6.  **Pattern Consistency:** Adhere to established project patterns or inferred from existing code within the relevant `app/` or `package/`. Don't introduce new architectural patterns without discussion. If replacing an old pattern, ensure the old implementation is fully removed.
7.  **File Naming:** Use clear, descriptive names. `PascalCase` for components (`.astro`, `.tsx`), `camelCase` or `kebab-case` for utilities/services (`.ts`). Follow conventions within the specific directory (e.g., `apps/website/src/pages/` uses `kebab-case`). Avoid temporary names like "temp", "refactored", "improved", etc., in permanent file names.
8.  **No One-Time Scripts:** Do not commit one-time utility scripts into the main codebase (`apps/`, `packages/`, `modules/`). Place them in `scripts/` if necessary for project tasks.

## ♻️ Refactoring

1.  **Purposeful Refactoring:** Refactor to improve clarity, reduce duplication, simplify complexity, or adhere to architectural goals.
2.  **Holistic Check:** When refactoring, look for duplicate code, similar components/files, and opportunities for consolidation across the affected area and potentially within shared `packages/`.
3.  **Edit, Don't Copy:** Modify existing files directly. Do not duplicate files and rename them (e.g., `component-v2.tsx`).
4.  **Verify Integrations:** After refactoring, ensure all callers, dependencies (within the monorepo and external), and integration points function correctly. Run relevant tests (`bun test`, `bun test:e2e`). Check impacted applications (e.g., `apps/website`).
